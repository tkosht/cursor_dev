# Memory Bank 更新ルール

## 1. 更新タイミング

### 必須の更新タイミング
1. タスク完了時
   - 実装完了
   - テスト完了
   - レビュー完了
   - ドキュメント作成/更新完了

2. 重要な決定時
   - アーキテクチャの決定
   - 技術選定の変更
   - 要件の変更
   - 設計方針の変更

3. 問題発生時
   - バグの発見
   - セキュリティ問題の検出
   - パフォーマンス問題の特定

### 推奨される更新タイミング
- 新しい知見の獲得時
- パターンやベストプラクティスの発見時
- 潜在的なリスクの特定時

## 2. 更新対象ファイルのチェックリスト

### projectbrief.md
- [ ] プロジェクトの目的や要件に変更はあるか
- [ ] スコープの変更はあるか
- [ ] 主要なステークホルダーの変更はあるか

### productContext.md
- [ ] ユーザー体験に影響する変更はあるか
- [ ] 新しい問題や課題が発見されたか
- [ ] 解決方法に変更があるか

### activeContext.md （最優先で更新）
- [ ] 現在の作業状況を反映しているか
- [ ] 直近の変更内容が記録されているか
- [ ] 次のステップが明確か
- [ ] 現在の判断や考慮事項が記録されているか

### systemPatterns.md
- [ ] アーキテクチャに変更があるか
- [ ] 新しい設計パターンを導入したか
- [ ] コンポーネント間の関係に変更があるか

### techContext.md
- [ ] 技術スタックに変更があるか
- [ ] 開発環境に変更があるか
- [ ] 依存関係に変更があるか

### progress.md
- [ ] 完了した項目を記録したか
- [ ] 新しい課題を追加したか
- [ ] 現在の状況を正確に反映しているか

## 3. 更新の優先順位

1. 最優先（即時更新必須）
   - activeContext.md
   - progress.md

2. 高優先（24時間以内に更新）
   - systemPatterns.md（アーキテクチャ変更時）
   - techContext.md（技術スタック変更時）

3. 通常優先（タスク完了時に更新）
   - productContext.md
   - その他の文脈ファイル

4. 低優先（定期的なレビュー時に更新）
   - projectbrief.md（大きな変更がない場合）

## 4. 更新品質チェック

各更新時に以下を確認：
- [ ] 日付とタイムスタンプの記録
- [ ] 変更理由の明記
- [ ] 影響範囲の記述
- [ ] 関連ファイルの相互参照
- [ ] 一貫性の確認

## 5. レビュープロセス

### 日次レビュー
- activeContext.md
- progress.md

### 週次レビュー
- systemPatterns.md
- techContext.md
- productContext.md

### 月次レビュー
- projectbrief.md
- 全体の一貫性確認

## 6. 更新の記録形式

```markdown
## [YYYY-MM-DD] 更新タイトル

### 変更内容
- 具体的な変更点

### 変更理由
- 変更が必要となった背景や理由

### 影響範囲
- 影響を受けるコンポーネントや機能
- 関連する更新が必要なファイル

### 次のアクション
- フォローアップが必要な項目
- 保留事項
```

## 7. 整合性の維持

- ファイル間の相互参照を明確に記録
- 関連する更新は同時に実施
- 矛盾する情報がないか確認
- 古い情報のアーカイブまたは削除 

## 将来的なルール整備計画

以下は現在のMVPフェーズでは必須ではありませんが、将来的に整備を検討すべきルール群です。
プロジェクトの成長に応じて、必要性を評価し、適切なタイミングで整備を行います。

### セキュリティガイドライン
- セキュリティチェックリストの整備
- 環境変数管理の詳細化
- インシデント対応フローの定義
- セキュリティレビュー基準

### CI/CDパイプライン
- 自動化プロセスの定義
- デプロイメントフローの整備
- 品質ゲート基準の策定
- 自動テスト環境の要件

### パフォーマンス最適化
- パフォーマンス基準の定義
- 監視メトリクスの設定
- 最適化プロセスの確立
- 負荷テスト基準

### コードレビュー基準の詳細化
- レビュー基準の統一
- レビュープロセスの標準化
- フィードバックテンプレート
- レビュー優先度の定義

### 開発ワークフロー拡張
- チーム間連携プロセス
- タスク優先順位付けの詳細基準
- 複数チーム開発ガイドライン 
