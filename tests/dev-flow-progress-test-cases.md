# dev-flow 進捗管理機能テストケース

## テストケース1: 進捗ファイル作成
### 前提条件
- `.claude/progress/` ディレクトリが存在する
- 新規タスクを開始する

### テスト手順
```bash
/dev-flow "ユーザー認証機能の実装"
```

### 期待結果
- `.claude/progress/user_auth_impl_[timestamp].yaml` が作成される
- ファイルに以下が含まれる：
  - task_description: "ユーザー認証機能の実装"
  - current_phase: 1
  - status: "in_progress"

## テストケース2: 進捗の自動保存
### 前提条件
- タスクが実行中である
- Phase1のStep2が完了する

### テスト手順
- Phase1のStep2（テストドリブン開発）を完了

### 期待結果
- 進捗ファイルが自動更新される
- completed_steps に Step2 が追加される
- last_updated が更新される

## テストケース3: 中断と再開
### 前提条件
- Phase2の途中で作業を中断
- 進捗ファイルが存在する

### テスト手順
```bash
# 中断後
/dev-flow --resume
```

### 期待結果
- 最新の進捗ファイルが自動検出される
- "進捗を検出しました: ユーザー認証機能の実装" が表示される
- Phase2の中断したステップから再開される

## テストケース4: 進捗状態の確認
### 前提条件
- 実行中のタスクが存在する

### テスト手順
```bash
/dev-flow --status
```

### 期待結果
- 現在のタスク説明が表示される
- 現在のフェーズとステップが表示される
- 完了率が表示される
- 次のアクションが表示される

## テストケース5: 複数タスクの管理
### 前提条件
- 複数の進捗ファイルが存在する

### テスト手順
```bash
/dev-flow --list-progress
```

### 期待結果
- 全ての進捗ファイルがリスト表示される
- 各タスクの説明と状態が確認できる
- 最終更新日時が表示される

## テストケース6: エラーハンドリング - 破損ファイル
### 前提条件
- 破損した進捗ファイルが存在する

### テスト手順
```bash
/dev-flow --resume
```

### 期待結果
- エラーメッセージが表示される
- バックアップの作成が提案される
- 新規開始のオプションが提示される

## テストケース7: 特定フェーズからの開始と進捗保存
### 前提条件
- 新規タスクをPhase2から開始する

### テスト手順
```bash
/dev-flow "バグ修正作業" --phase 2
```

### 期待結果
- Phase2から開始される
- 進捗ファイルにcurrent_phase: 2が記録される
- Phase1はスキップされたことが記録される

## 検証項目チェックリスト
- [ ] 進捗ファイルのYAML形式が正しい
- [ ] タイムスタンプが適切に記録される
- [ ] ファイル名の命名規則が守られる
- [ ] 並行タスクが干渉しない
- [ ] エラー時のリカバリーが機能する
- [ ] dag-debug-enhancedと同様の階層構造