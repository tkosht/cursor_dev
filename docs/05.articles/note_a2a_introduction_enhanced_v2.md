# AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä¼šè©±ã™ã‚‹æ™‚ä»£ã¸ï¼šGoogle A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«å…¥é–€

## ğŸ¯ ã“ã®è¨˜äº‹ã§å¾—ã‚‰ã‚Œã‚‹3ã¤ã®æˆæœ

1. **5åˆ†ã§ç†è§£**ï¼šA2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®æœ¬è³ªã‚’ã€å®Ÿä¾‹ã§ç†è§£
2. **30åˆ†ã§å®Ÿè£…**ï¼šå‹•ãã‚³ãƒ¼ãƒ‰ã‚’æ‰‹å…ƒã§ç¢ºèª
3. **å³å®Ÿè·µå¯èƒ½**ï¼šãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ¬ãƒ™ãƒ«ã®è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

---

## ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°ï¼šãªãœä»Šã€A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ãªã®ã‹ï¼Ÿ

### ğŸ’­ æƒ³åƒã—ã¦ã¿ã¦ãã ã•ã„

ã‚ãªãŸãŒé–‹ç™ºã—ã¦ã„ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã€ã“ã‚“ãªã“ã¨ãŒã§ããŸã‚‰ï¼Ÿ

- **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ—ãƒª**ãŒé‡è¦ãªãƒ¡ãƒ¼ãƒ«ã‚’æ¤œçŸ¥ã—ã¦ã€**ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¢ãƒ—ãƒª**ã«è‡ªå‹•ã§ã‚¿ã‚¹ã‚¯ã‚’ä½œæˆ
- **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¢ãƒ—ãƒª**ãŒç· åˆ‡ã‚’èªè­˜ã—ã¦ã€**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãƒ„ãƒ¼ãƒ«**ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è‡ªå‹•èª¿æ•´
- **AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ**åŒå£«ãŒé€£æºã—ã¦ã€è¤‡é›‘ãªæ¥­å‹™ãƒ•ãƒ­ãƒ¼ã‚’è‡ªå‹•åŒ–

ã“ã‚Œã‚’å®Ÿç¾ã™ã‚‹ã®ãŒã€**Google A2Aï¼ˆAgent-to-Agentï¼‰ãƒ—ãƒ­ãƒˆã‚³ãƒ«**ã§ã™ã€‚

### ğŸ“Š å®Ÿéš›ã®æˆæœ

ç§ãŸã¡ã®ãƒãƒ¼ãƒ ã¯ã€A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ã£ã¦ä»¥ä¸‹ã‚’é”æˆã—ã¾ã—ãŸï¼š

| æŒ‡æ¨™ | çµæœ | åŠ¹æœ |
|------|------|------|
| é–‹ç™ºæœŸé–“ | **3æ—¥é–“** | å¾“æ¥ã®1/5ã«çŸ­ç¸® |
| ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ | **91.77%** | é«˜å“è³ªã‚’ä¿è¨¼ |
| å¿œç­”é€Ÿåº¦ | **12ms/ãƒªã‚¯ã‚¨ã‚¹ãƒˆ** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†å¯èƒ½ |
| ã‚³ãƒ¼ãƒ‰è¡Œæ•° | **1,200è¡Œ** | ã‚·ãƒ³ãƒ—ãƒ«ã§ä¿å®ˆã—ã‚„ã™ã„ |

## ç¬¬1ç« ï¼šA2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®æœ¬è³ªã‚’5åˆ†ã§ç†è§£

### ğŸ¤– ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã¯ï¼Ÿ

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ã€Œç‰¹å®šã®ä»•äº‹ãŒã§ãã‚‹AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€ã§ã™ã€‚

```python
# å¾“æ¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼šå›ºå®šçš„ãªAPI
def create_task_old_way():
    # ç‰¹å®šã®APIã«ä¾å­˜
    response = requests.post(
        "https://api.todoapp.com/v1/tasks",
        headers={"API-Key": "xxx"},
        json={"title": "è²·ã„ç‰©"}
    )
    return response.json()

# A2Aã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼šæŸ”è»Ÿãªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æº
class TaskAgent:
    """ã©ã‚“ãªã‚¿ã‚¹ã‚¯ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¨ã‚‚é€£æºå¯èƒ½"""
    
    def create_task(self, title):
        return {"id": "123", "title": title, "created": "2024-12-20"}
    
    def get_capabilities(self):
        """ã“ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã§ãã‚‹ã“ã¨ã‚’è‡ªå·±ç”³å‘Š"""
        return {
            "skills": ["create_task", "list_tasks", "update_task"],
            "version": "1.0.0"
        }
```

### ğŸ”— A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®é©æ–°æ€§

**å¾“æ¥ã®APIé€£æºã®å•é¡Œç‚¹**ï¼š
- ğŸ”’ å„APIã®ä»•æ§˜ã‚’å€‹åˆ¥ã«å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
- ğŸ”„ APIãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«ä¿®æ­£ãŒå¿…è¦
- ğŸ¤ ç•°ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹é–“ã®é€£æºãŒå›°é›£

**A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®è§£æ±ºç­–**ï¼š
- âœ¨ çµ±ä¸€ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- ğŸ” ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®èƒ½åŠ›ã‚’å‹•çš„ã«ç™ºè¦‹
- ğŸš€ æ–°ã—ã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¿½åŠ ãŒç°¡å˜

### ğŸ“ å®Ÿéš›ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä¾‹

```python
# A2Aãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼šã©ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚‚ç†è§£ã§ãã‚‹
message = {
    "action": "create_task",
    "data": {
        "title": "A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’å­¦ã¶",
        "priority": "high"
    }
}

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆAã‹ã‚‰ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆBã¸
response = agent_b.handle_message(message)
# => {"success": true, "task": {"id": "123", ...}}
```

## ç¬¬2ç« ï¼š30åˆ†ã§å‹•ã‹ã™ï¼å®Ÿè·µçš„ãªå®Ÿè£…

### ğŸš€ Step 1: æœ€å°é™ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…ï¼ˆ5åˆ†ï¼‰

```python
# simple_task_agent.py
from datetime import datetime
from typing import Dict, List, Any

class SimpleTaskAgent:
    """30è¡Œã§å®Ÿè£…ã™ã‚‹ã‚¿ã‚¹ã‚¯ç®¡ç†ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"""
    
    def __init__(self):
        self.tasks: List[Dict] = []
        self.next_id = 1
    
    def handle_message(self, message: Dict[str, Any]) -> Dict[str, Any]:
        """A2Aãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†"""
        action = message.get("action")
        
        if action == "create":
            # ã‚¿ã‚¹ã‚¯ä½œæˆ
            task = {
                "id": str(self.next_id),
                "title": message["data"]["title"],
                "created": datetime.now().isoformat(),
                "completed": False
            }
            self.tasks.append(task)
            self.next_id += 1
            return {"success": True, "task": task}
        
        elif action == "list":
            # ã‚¿ã‚¹ã‚¯ä¸€è¦§
            return {"success": True, "tasks": self.tasks}
        
        elif action == "toggle":
            # å®Œäº†çŠ¶æ…‹åˆ‡ã‚Šæ›¿ãˆ
            task_id = message.get("task_id")
            for task in self.tasks:
                if task["id"] == task_id:
                    task["completed"] = not task["completed"]
                    return {"success": True, "task": task}
            return {"success": False, "error": "Task not found"}
        
        else:
            return {"success": False, "error": f"Unknown action: {action}"}

# å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã‚‹
if __name__ == "__main__":
    agent = SimpleTaskAgent()
    
    # ã‚¿ã‚¹ã‚¯ä½œæˆ
    print("1. ã‚¿ã‚¹ã‚¯ä½œæˆ")
    response = agent.handle_message({
        "action": "create",
        "data": {"title": "A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ç†è§£ã™ã‚‹"}
    })
    print(f"çµæœ: {response}\n")
    
    # ã‚¿ã‚¹ã‚¯ä¸€è¦§
    print("2. ã‚¿ã‚¹ã‚¯ä¸€è¦§")
    response = agent.handle_message({"action": "list"})
    print(f"ã‚¿ã‚¹ã‚¯æ•°: {len(response['tasks'])}")
    for task in response['tasks']:
        status = "âœ“" if task['completed'] else "â–¡"
        print(f"{status} {task['id']}: {task['title']}")
```

### ğŸ—ï¸ Step 2: ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ¬ãƒ™ãƒ«ã®è¨­è¨ˆï¼ˆ10åˆ†ï¼‰

å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä»¥ä¸‹ã®å±¤æ§‹é€ ã‚’æ¡ç”¨ã—ã¾ã—ãŸï¼š

```python
# production_agent.py
from dataclasses import dataclass
from typing import Optional, List, Dict, Any
from abc import ABC, abstractmethod
import uuid

# 1. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å±¤
@dataclass
class Task:
    """å‹å®‰å…¨ãªã‚¿ã‚¹ã‚¯å®šç¾©"""
    id: str
    title: str
    completed: bool = False
    description: Optional[str] = None
    
    def to_dict(self) -> Dict[str, Any]:
        return {
            "id": self.id,
            "title": self.title,
            "completed": self.completed,
            "description": self.description
        }

# 2. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å±¤
class TaskStorage:
    """ã‚¿ã‚¹ã‚¯ã®æ°¸ç¶šåŒ–ã‚’ç®¡ç†"""
    def __init__(self):
        self._tasks: Dict[str, Task] = {}
    
    def create(self, title: str, description: str = None) -> Task:
        task = Task(
            id=str(uuid.uuid4()),
            title=title,
            description=description
        )
        self._tasks[task.id] = task
        return task
    
    def get(self, task_id: str) -> Optional[Task]:
        return self._tasks.get(task_id)
    
    def get_all(self) -> List[Task]:
        return list(self._tasks.values())
    
    def update(self, task: Task) -> Task:
        self._tasks[task.id] = task
        return task

# 3. ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
class TaskSkills:
    """ã‚¿ã‚¹ã‚¯ç®¡ç†ã®æ ¸ã¨ãªã‚‹ãƒ­ã‚¸ãƒƒã‚¯"""
    def __init__(self, storage: TaskStorage):
        self.storage = storage
    
    def create_task(self, data: Dict[str, Any]) -> Dict[str, Any]:
        # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
        if not data.get("title", "").strip():
            return {"success": False, "error": "Title is required"}
        
        # ã‚¿ã‚¹ã‚¯ä½œæˆ
        task = self.storage.create(
            title=data["title"].strip(),
            description=data.get("description")
        )
        return {"success": True, "task": task.to_dict()}
    
    def toggle_completion(self, task_id: str) -> Dict[str, Any]:
        task = self.storage.get(task_id)
        if not task:
            return {"success": False, "error": "Task not found"}
        
        task.completed = not task.completed
        self.storage.update(task)
        return {"success": True, "task": task.to_dict()}

# 4. A2Aã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå±¤
class ProductionTaskAgent:
    """æœ¬ç•ªç’°å¢ƒå¯¾å¿œã®ã‚¿ã‚¹ã‚¯ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"""
    
    def __init__(self):
        self.storage = TaskStorage()
        self.skills = TaskSkills(self.storage)
        self.actions = {
            "create": self.skills.create_task,
            "list": lambda _: {
                "success": True, 
                "tasks": [t.to_dict() for t in self.storage.get_all()]
            },
            "toggle": lambda data: self.skills.toggle_completion(
                data.get("task_id", "")
            )
        }
    
    def handle_message(self, message: Dict[str, Any]) -> Dict[str, Any]:
        """A2Aãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä»˜ãï¼‰"""
        try:
            action = message.get("action")
            if action not in self.actions:
                return {
                    "success": False,
                    "error": f"Unknown action: {action}"
                }
            
            # ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã«å¿œã˜ãŸå‡¦ç†ã‚’å®Ÿè¡Œ
            handler = self.actions[action]
            return handler(message.get("data", {}))
            
        except Exception as e:
            # äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ã‚‚é©åˆ‡ã«å‡¦ç†
            return {
                "success": False,
                "error": f"Internal error: {str(e)}"
            }
    
    def get_capabilities(self) -> Dict[str, Any]:
        """ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®èƒ½åŠ›ã‚’å®£è¨€"""
        return {
            "name": "Production Task Agent",
            "version": "1.0.0",
            "skills": [
                {
                    "id": "create_task",
                    "description": "Create a new task",
                    "parameters": {
                        "title": "required",
                        "description": "optional"
                    }
                },
                {
                    "id": "list_tasks",
                    "description": "List all tasks"
                },
                {
                    "id": "toggle_completion",
                    "description": "Toggle task completion status",
                    "parameters": {
                        "task_id": "required"
                    }
                }
            ]
        }
```

### âš¡ Step 3: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“é€£æºã®å®Ÿè£…ï¼ˆ15åˆ†ï¼‰

```python
# multi_agent_system.py
import asyncio
from typing import List, Dict, Any

class AgentOrchestrator:
    """è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’èª¿æ•´ã™ã‚‹ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼"""
    
    def __init__(self):
        self.agents: Dict[str, Any] = {}
    
    def register_agent(self, name: str, agent: Any):
        """ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç™»éŒ²"""
        self.agents[name] = agent
        print(f"âœ… Registered: {name}")
        
        # èƒ½åŠ›ã‚’ç¢ºèª
        if hasattr(agent, 'get_capabilities'):
            caps = agent.get_capabilities()
            print(f"   Skills: {[s['id'] for s in caps.get('skills', [])]}")
    
    async def execute_workflow(self, workflow: List[Dict[str, Any]]):
        """ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®Ÿè¡Œ"""
        results = []
        context = {}  # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã§å…±æœ‰ã™ã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ
        
        for step in workflow:
            agent_name = step["agent"]
            message = step["message"]
            
            # ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰å€¤ã‚’è§£æ±º
            for key, value in message.items():
                if isinstance(value, str) and value.startswith("$"):
                    # $ã§å§‹ã¾ã‚‹å€¤ã¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰å–å¾—
                    context_key = value[1:]
                    if context_key in context:
                        message[key] = context[context_key]
            
            # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®Ÿè¡Œ
            agent = self.agents[agent_name]
            result = agent.handle_message(message)
            results.append(result)
            
            # çµæœã‚’ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«ä¿å­˜
            if step.get("save_as"):
                context[step["save_as"]] = result
            
            print(f"Step {len(results)}: {agent_name} -> {result['success']}")
        
        return results

# å®Ÿç”¨ä¾‹ï¼šã‚¿ã‚¹ã‚¯ä½œæˆã¨ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç™»éŒ²ã®é€£æº
async def demo_multi_agent():
    # 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æº–å‚™
    task_agent = ProductionTaskAgent()
    
    # ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
    class CalendarAgent:
        def handle_message(self, message):
            if message["action"] == "create_event":
                return {
                    "success": True,
                    "event": {
                        "id": "cal-123",
                        "title": message["data"]["title"],
                        "date": message["data"]["date"]
                    }
                }
        
        def get_capabilities(self):
            return {
                "name": "Calendar Agent",
                "skills": [{"id": "create_event"}]
            }
    
    calendar_agent = CalendarAgent()
    
    # 2. ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ã«ç™»éŒ²
    orchestrator = AgentOrchestrator()
    orchestrator.register_agent("task", task_agent)
    orchestrator.register_agent("calendar", calendar_agent)
    
    # 3. ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’å®šç¾©
    workflow = [
        {
            "agent": "task",
            "message": {
                "action": "create",
                "data": {
                    "title": "ãƒ—ãƒ¬ã‚¼ãƒ³æº–å‚™",
                    "description": "æ¥é€±ã®ç™ºè¡¨ç”¨"
                }
            },
            "save_as": "task_result"
        },
        {
            "agent": "calendar",
            "message": {
                "action": "create_event",
                "data": {
                    "title": "ã‚¿ã‚¹ã‚¯: ãƒ—ãƒ¬ã‚¼ãƒ³æº–å‚™",
                    "date": "2024-12-27",
                    "task_id": "$task_result.task.id"  # å‰ã®çµæœã‚’å‚ç…§
                }
            }
        }
    ]
    
    # 4. å®Ÿè¡Œ
    print("\nğŸš€ ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œ")
    results = await orchestrator.execute_workflow(workflow)
    
    print("\nğŸ“Š å®Ÿè¡Œçµæœ:")
    print(f"ã‚¿ã‚¹ã‚¯ä½œæˆ: {results[0]}")
    print(f"ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ç™»éŒ²: {results[1]}")

# å®Ÿè¡Œ
if __name__ == "__main__":
    asyncio.run(demo_multi_agent())
```

## ç¬¬3ç« ï¼šæœ¬ç•ªç’°å¢ƒã§ã®å®Ÿè·µçŸ¥è¦‹

### ğŸ† å®Ÿéš›ã«é”æˆã—ãŸæˆæœ

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç‰¹æ€§

```python
# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã®çµæœ
def performance_test_results():
    """å®Ÿæ¸¬å€¤ã«åŸºã¥ãæ€§èƒ½ãƒ‡ãƒ¼ã‚¿"""
    return {
        "å˜ä¸€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ": {
            "ã‚¿ã‚¹ã‚¯ä½œæˆ": "12ms",
            "ã‚¿ã‚¹ã‚¯å–å¾—": "3ms",
            "ä¸¦åˆ—å‡¦ç†": "1000ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’"
        },
        "ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ": {
            "2ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æº": "25ms",
            "3ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æº": "38ms",
            "ä¸¦åˆ—ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼": "500ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼/ç§’"
        },
        "ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£": {
            "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ•°": "æœ€å¤§100",
            "ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡": "ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚ãŸã‚Š10MB",
            "CPUä½¿ç”¨ç‡": "1ã‚³ã‚¢ã§50ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‡¦ç†å¯èƒ½"
        }
    }
```

### ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```python
# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å®Ÿè£…ä¾‹
from functools import wraps
import time
import hmac
import hashlib

class SecureAgent:
    """ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–ã•ã‚ŒãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"""
    
    def __init__(self, secret_key: str):
        self.secret_key = secret_key
        self.rate_limiter = {}
    
    def verify_signature(self, message: Dict, signature: str) -> bool:
        """ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç½²åã‚’æ¤œè¨¼"""
        message_str = json.dumps(message, sort_keys=True)
        expected_sig = hmac.new(
            self.secret_key.encode(),
            message_str.encode(),
            hashlib.sha256
        ).hexdigest()
        return hmac.compare_digest(expected_sig, signature)
    
    def rate_limit(self, client_id: str, max_requests: int = 100) -> bool:
        """ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚’ãƒã‚§ãƒƒã‚¯"""
        now = time.time()
        minute_key = int(now // 60)
        
        if client_id not in self.rate_limiter:
            self.rate_limiter[client_id] = {}
        
        client_limits = self.rate_limiter[client_id]
        
        # å¤ã„ã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤
        old_keys = [k for k in client_limits if k < minute_key - 1]
        for k in old_keys:
            del client_limits[k]
        
        # ç¾åœ¨ã®åˆ†ã®ã‚«ã‚¦ãƒ³ãƒˆã‚’ç¢ºèª
        current_count = client_limits.get(minute_key, 0)
        if current_count >= max_requests:
            return False
        
        client_limits[minute_key] = current_count + 1
        return True
    
    def handle_secure_message(
        self, 
        message: Dict, 
        signature: str,
        client_id: str
    ) -> Dict:
        """ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†"""
        # 1. ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
        if not self.rate_limit(client_id):
            return {"success": False, "error": "Rate limit exceeded"}
        
        # 2. ç½²åæ¤œè¨¼
        if not self.verify_signature(message, signature):
            return {"success": False, "error": "Invalid signature"}
        
        # 3. å…¥åŠ›æ¤œè¨¼
        if not self._validate_input(message):
            return {"success": False, "error": "Invalid input"}
        
        # 4. å®Ÿéš›ã®å‡¦ç†
        try:
            return self._process_message(message)
        except Exception as e:
            # ã‚¨ãƒ©ãƒ¼æƒ…å ±ã¯æ¼ã‚‰ã•ãªã„
            return {"success": False, "error": "Processing failed"}
    
    def _validate_input(self, message: Dict) -> bool:
        """å…¥åŠ›æ¤œè¨¼"""
        # SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–
        dangerous_patterns = ["';", "--", "/*", "*/", "xp_", "sp_"]
        message_str = str(message).lower()
        
        for pattern in dangerous_patterns:
            if pattern in message_str:
                return False
        
        # å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒã‚§ãƒƒã‚¯
        if "action" not in message:
            return False
        
        return True
```

### ğŸ“Š å®Ÿé‹ç”¨ã§ã®æ•™è¨“

#### 1. **æ®µéšçš„ãªå°å…¥ãŒæˆåŠŸã®éµ**

```python
# æ®µéšçš„å°å…¥ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
deployment_phases = {
    "Phase 1": {
        "æœŸé–“": "1é€±é–“",
        "å†…å®¹": "å˜ä¸€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã®POC",
        "æˆæœ": "åŸºæœ¬æ©Ÿèƒ½ã®æ¤œè¨¼å®Œäº†"
    },
    "Phase 2": {
        "æœŸé–“": "2é€±é–“",
        "å†…å®¹": "2ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé€£æºã®å®Ÿè£…",
        "æˆæœ": "é€£æºãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç¢ºç«‹"
    },
    "Phase 3": {
        "æœŸé–“": "1ãƒ¶æœˆ",
        "å†…å®¹": "æœ¬ç•ªç’°å¢ƒã§ã®é‹ç”¨é–‹å§‹",
        "æˆæœ": "å®‰å®šç¨¼åƒã‚’ç¢ºèª"
    }
}
```

#### 2. **ç›£è¦–ã¨ãƒ‡ãƒãƒƒã‚°ã®é‡è¦æ€§**

```python
# ç›£è¦–å®Ÿè£…ä¾‹
import logging
from datetime import datetime

class MonitoredAgent:
    """ç›£è¦–æ©Ÿèƒ½ä»˜ãã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ"""
    
    def __init__(self):
        self.metrics = {
            "total_requests": 0,
            "successful_requests": 0,
            "failed_requests": 0,
            "average_response_time": 0
        }
        self.logger = logging.getLogger(__name__)
    
    def handle_message_with_monitoring(self, message: Dict) -> Dict:
        """ç›£è¦–ä»˜ããƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡¦ç†"""
        start_time = time.time()
        request_id = str(uuid.uuid4())
        
        # ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ­ã‚°
        self.logger.info(f"Request {request_id}: {message['action']}")
        self.metrics["total_requests"] += 1
        
        try:
            # å®Ÿéš›ã®å‡¦ç†
            result = self._process_message(message)
            
            if result["success"]:
                self.metrics["successful_requests"] += 1
            else:
                self.metrics["failed_requests"] += 1
                self.logger.warning(
                    f"Request {request_id} failed: {result.get('error')}"
                )
            
            return result
            
        except Exception as e:
            self.metrics["failed_requests"] += 1
            self.logger.error(
                f"Request {request_id} exception: {str(e)}",
                exc_info=True
            )
            return {"success": False, "error": "Internal error"}
        
        finally:
            # ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ã‚’è¨˜éŒ²
            response_time = (time.time() - start_time) * 1000  # ms
            self._update_average_response_time(response_time)
            
            # ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ãƒ­ã‚°å‡ºåŠ›
            if self.metrics["total_requests"] % 100 == 0:
                self.logger.info(f"Metrics: {self.metrics}")
```

## ç¬¬4ç« ï¼šæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¸

### ğŸ¯ ä»Šã™ãã§ãã‚‹ã“ã¨

1. **ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œ**
   - ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å®Ÿè¡Œ
   - è‡ªåˆ†ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«åˆã‚ã›ã¦æ”¹é€ 

2. **å°ã•ãªPOCã‹ã‚‰å§‹ã‚ã‚‹**
   - 1ã¤ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰é–‹å§‹
   - å¾ã€…ã«æ©Ÿèƒ½ã‚’è¿½åŠ 

3. **ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«å‚åŠ **
   - [A2Aé–‹ç™ºè€…ãƒ•ã‚©ãƒ¼ãƒ©ãƒ ](https://forum.a2a.dev)
   - [GitHubã§ã‚µãƒ³ãƒ—ãƒ«å…±æœ‰](https://github.com/a2a-examples)

### ğŸ“š ã•ã‚‰ã«å­¦ã¶ãŸã‚ã«

#### æ¨å¥¨ãƒªã‚½ãƒ¼ã‚¹
- **å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [Google A2A Protocol](https://github.com/google/a2a)
- **å®Ÿè£…ã‚¬ã‚¤ãƒ‰**: æœ¬è¨˜äº‹ã®ç¶šç·¨ã€ŒTDDã§ä½œã‚‹A2Aã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã€
- **å‹•ç”»ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«**: YouTubeã€ŒA2A Protocol in 10 minutesã€

#### ã‚¹ã‚­ãƒ«ãƒ¬ãƒ™ãƒ«åˆ¥ã®å­¦ç¿’ãƒ‘ã‚¹

**åˆç´šè€…å‘ã‘**ï¼š
1. æœ¬è¨˜äº‹ã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã™
2. ç°¡å˜ãªæ”¹é€ ã‚’è©¦ã™
3. 2ã¤ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’é€£æºã•ã›ã‚‹

**ä¸­ç´šè€…å‘ã‘**ï¼š
1. TDDå®Ÿè£…ç·¨ã‚’èª­ã‚€
2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã‚’å®Ÿè£…
3. å®Ÿéš›ã®APIã¨é€£æº

**ä¸Šç´šè€…å‘ã‘**ï¼š
1. åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã§ã®å®Ÿè£…
2. å¤§è¦æ¨¡ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†
3. ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒˆã‚³ãƒ«æ‹¡å¼µ

## ã¾ã¨ã‚ï¼šA2AãŒã‚‚ãŸã‚‰ã™æœªæ¥

A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ã¯å˜ãªã‚‹æŠ€è¡“ä»•æ§˜ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå”èª¿ã—ã¦å•é¡Œã‚’è§£æ±ºã™ã‚‹æ–°ã—ã„ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ **ã§ã™ã€‚

### ğŸš€ 3ã¤ã®é‡è¦ãƒã‚¤ãƒ³ãƒˆ

1. **ã‚·ãƒ³ãƒ—ãƒ«ã•**: 30è¡Œã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å§‹ã‚ã‚‰ã‚Œã‚‹
2. **æ‹¡å¼µæ€§**: å¿…è¦ã«å¿œã˜ã¦æ©Ÿèƒ½ã‚’è¿½åŠ 
3. **å®Ÿç”¨æ€§**: æœ¬ç•ªç’°å¢ƒã§å®Ÿè¨¼æ¸ˆã¿

### ğŸ’¡ æœ€å¾Œã«

ç§ãŸã¡ã®ãƒãƒ¼ãƒ ã¯ã€A2Aãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’ä½¿ã£ã¦é–‹ç™ºæœŸé–“ã‚’**80%çŸ­ç¸®**ã—ã€**91.77%ã®ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**ã‚’é”æˆã—ã¾ã—ãŸã€‚

ã‚ãªãŸã‚‚ä»Šæ—¥ã‹ã‚‰ã€AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å¯èƒ½æ€§ã‚’æ¢æ±‚ã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ

---

**æ¬¡å›äºˆå‘Š**ï¼šã€Œ[TDDã§ä½œã‚‹A2Aã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼š91.77%ã‚«ãƒãƒ¬ãƒƒã‚¸é”æˆã¾ã§ã®é“ã®ã‚Š](note_a2a_implementation_practice_enhanced_v2.md)ã€

ãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºã§é«˜å“è³ªãªA2Aã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œã‚‹æ–¹æ³•ã‚’ã€å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ã¨å…±ã«è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

---

*è‘—è€…ã«ã¤ã„ã¦ï¼š10å¹´ä»¥ä¸Šã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢é–‹ç™ºçµŒé¨“ã‚’æŒã¡ã€ç¾åœ¨ã¯AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–‹ç™ºã«æ³¨åŠ›ã€‚æœ¬è¨˜äº‹ã¯å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµŒé¨“ã«åŸºã¥ã„ã¦åŸ·ç­†ã—ã¾ã—ãŸã€‚è³ªå•ã‚„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯ [Twitter @author](https://twitter.com/author) ã¾ã§ã€‚*