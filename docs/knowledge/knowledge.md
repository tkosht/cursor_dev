# プロジェクト知識ベース

## 0. 設計ドキュメント参照
- 要件定義: `docs/01.requirements/adaptive_search.md`
  - 機能要件、非機能要件、インターフェース定義
  - エラー定義、制限事項、セキュリティ要件
  - 運用監視要件

- 基本設計: `docs/02.basic_design/adaptive_search.md`
  - システム構成、処理フロー
  - データ構造、インターフェース設計
  - 設定パラメータ、監視設計
  - セキュリティ設計、運用設計

- 詳細設計: `docs/03.detail_design/adaptive_search.md`
  - クラス詳細設計（各クラスの実装詳細）
  - 例外クラス設計
  - 設定ファイル定義
  - ログ設定、メトリクス定義
  - テスト設計、デプロイメント手順

## 1. 外部API

### 1.1 Google Custom Search API
- 環境変数:
  - `GOOGLE_API_KEY`: Google APIキー
  - `CSE_ID`: カスタム検索エンジンID
- 用途: IR情報の動的URL検索
- 制限:
  - 1日あたりのクエリ制限あり
  - レート制限あり
- 注意点:
  - APIキーは環境変数で管理
  - サイト制限を適切に設定
  - 検索結果の関連性スコアを評価

## 2. 実装パターン

### 2.1 再試行制御
- 指数バックオフを使用
- 最大試行回数を設定
- エラー状態を記録

### 2.2 非同期処理
- `asyncio`を使用
- タイムアウト制御
- リソース解放の保証

## 3. エラーハンドリング

### 3.1 一般的なエラー
- ネットワークエラー
- タイムアウト
- 認証エラー

### 3.2 特殊なエラー
- データ抽出失敗
- 検証失敗
- 最大試行回数超過

## 4. パフォーマンス最適化

### 4.1 キャッシュ戦略
- 検索結果のキャッシュ
- 抽出データのキャッシュ
- キャッシュの有効期限管理

### 4.2 並行処理
- URL並行処理
- データ抽出の並行化
- リソース制限の考慮

## 5. 監視とロギング

### 5.1 メトリクス
- 成功率
- レスポンス時間
- エラー率
- リソース使用率

### 5.2 ログレベル
- INFO: 通常の処理フロー
- WARNING: 再試行発生
- ERROR: 致命的エラー
- DEBUG: 詳細なデバッグ情報