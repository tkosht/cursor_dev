# プロジェクト知識ベース

## HTMLコンテンツ解析

### 日付抽出
- スコープ：`ContentParser`クラス
- 内容：
  1. Open Graph記事公開日（`article:published_time`）が最も信頼性が高い
  2. 次に`time`要素の`datetime`属性を優先
  3. 日付なしの場合は明示的にNoneを返す
- 再利用場面：
  - 新しいコンテンツソースを追加する際の日付抽出実装
  - 日付フォーマットの統一が必要な場合

### テキスト抽出
- スコープ：`ContentParser`クラス
- 内容：
  1. 単純な長さの閾値による判定は不適切
  2. 最長のテキストを本文として抽出する方法が効果的
  3. `article`や`main`要素を優先的に確認
- 再利用場面：
  - 新しいコンテンツソースを追加する際のテキスト抽出実装
  - コンテンツ品質の向上が必要な場合

## エンティティ処理

### プロパティバリデーション
- スコープ：`MarketAnalyzer`クラス
- 内容：
  1. 必須プロパティの検証を実装
  2. プロパティの型と値の範囲を検証
  3. 警告ログを適切に記録
- 再利用場面：
  - 新しいエンティティタイプを追加する際
  - バリデーションルールの変更が必要な場合

## テスト設計

### エッジケース
- スコープ：テストケース全般
- 内容：
  1. 空のHTMLコンテンツ
  2. 日付なしのコンテンツ
  3. 無効なURLや応答
- 再利用場面：
  - 新機能のテストケース作成時
  - エラー処理の改善時

### メトリクス収集
- スコープ：`PerformanceMonitor`クラス
- 内容：
  1. 処理時間の計測
  2. 成功/失敗の記録
  3. コンテンツサイズの追跡
- 再利用場面：
  - パフォーマンス最適化時
  - 新機能のモニタリング追加時 