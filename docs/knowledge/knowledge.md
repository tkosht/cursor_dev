# 市場分析システムの知識ベース

## エンティティ構造化
### スコープ
- app/market_analyzer.py の _create_entity メソッド

### 知識内容
1. 必須フィールド
   - id: エンティティの一意識別子
   - name: エンティティの名称
   - type: エンティティの種別（COMPANY/PRODUCT/SERVICE）
   - content: エンティティの説明内容
   - source: 情報源
   - timestamp: 作成/更新時刻
   - impact: 市場への影響度（0.0-1.0）

2. プロパティの制約
   - 既存のキーは上書きしない（データの一貫性を保持）
   - 値の型は文字列、数値、真偽値のみ許可（Neo4jの制約に準拠）

### 再利用場面
- 新規エンティティ作成時
- エンティティ構造の変更時
- データバリデーション実装時

## リレーションシップ管理
### スコープ
- app/market_analyzer.py の _validate_relationship メソッド

### 知識内容
1. 関係タイプの制約
   - INFLUENCES: 影響関係
   - COMPETES: 競合関係
   - DEVELOPS: 開発関係
   - PARTICIPATES: 参加関係

2. 必須プロパティ
   - source: 関係の起点エンティティ
   - target: 関係の終点エンティティ
   - type: 関係の種別
   - strength: 関係の強度（0.0-1.0）
   - timestamp: 作成時刻

### 再利用場面
- 新規リレーションシップ作成時
- リレーションシップのバリデーション実装時

## 市場影響度計算
### スコープ
- app/market_analyzer.py の _calculate_impact_score メソッド

### 知識内容
1. 影響度の構成要素
   - 基本スコア: 50%（エンティティの直接的な重要度）
   - トレンド影響: 30%（市場トレンドからの影響）
   - 企業動向: 20%（関連企業の動向による影響）

2. スコア正規化
   - すべての要素を0.0-1.0の範囲に正規化
   - 重み付け合算後も0.0-1.0の範囲を保証

### 再利用場面
- 影響度計算ロジックの修正時
- 新規要素の追加時
- スコアの調整時 