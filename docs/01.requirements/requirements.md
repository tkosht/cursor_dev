# 要件定義書 (MVP版)

## 1. 概要
本ツールは、X（旧Twitter）のブックマーク情報を検索し、LLMによるRAG（Retrieval-Augmented Generation）を実現するシステムです。

## 2. 目的
ユーザーのXブックマークを効率的に検索し、関連する情報をAIが要約・解説することで、ブックマークの活用を支援します。

## 3. 対象ユーザー
- Xで多くのツイートをブックマークしているユーザー
- ブックマークした情報を検索・活用したいユーザー
- AIによる情報整理・要約を求めるユーザー

## 4. 機能要件

### 4.1 ブックマークデータ取得
- OAuth2認証によるXアカウントへのアクセス
- ブックマークデータの取得（最大800件）
- 基本的なエラー処理

### 4.2 データ管理
- JSON形式でのデータ保存
- 以下のメタデータを含む
  - ツイートID
  - ツイート本文
  - 投稿者情報
  - 投稿日時
  - URL

### 4.3 検索機能
- Faissを用いたベクトル検索
- 類似度に基づく検索結果の提供
- 基本的な検索結果の表示

### 4.4 LLM連携
- Gemini 2.0 Flashとの連携
- 検索結果を用いた回答生成
- 基本的なエラー処理

### 4.5 ユーザーインターフェース
- ai-gradioを用いたWebベースUI
- 以下の基本機能を提供
  - 検索クエリ入力
  - 検索結果表示
  - LLM生成回答の表示
  - 基本的なエラー表示

## 5. 非機能要件

### 5.1 性能要件
- 検索応答時間：3秒以内
- LLM回答生成：10秒以内
- 同時ユーザー数：1ユーザー

### 5.2 セキュリティ要件
- 認証情報は環境変数で管理
- 基本的なエラー処理の実装

### 5.3 可用性要件
- ローカル環境での動作保証
- 基本的なエラーリカバリー

### 5.4 保守性要件
- コードの可読性確保
- 基本的なテストの実装
- 必要最小限のドキュメント整備

## 6. 開発環境
- Python 3.10～3.12
- poetry による依存関係管理
- 基本的な単体テスト環境

## 7. MVP完了条件

### 7.1 必須機能の実装
1. ブックマーク取得
   - OAuth2認証
   - 基本的なデータ取得

2. 検索機能
   - ベクトル検索の基本実装
   - 検索結果の表示

3. LLM連携
   - Gemini 2.0 Flash連携
   - 基本的な回答生成

4. UI実装
   - 検索インターフェース
   - 結果表示機能

### 7.2 品質基準
1. 基本機能の動作確認
   - 主要機能の正常動作
   - 基本的なエラー処理

2. テスト実施
   - 基本的な単体テスト
   - 主要フローの動作確認

## 8. 将来の拡張計画

### 8.1 機能拡張
- 複数LLMの対応
- 高度な検索オプション
- リアルタイム更新機能

### 8.2 性能改善
- 検索速度の最適化
- キャッシュ機構の実装
- 並列処理の導入

### 8.3 UI改善
- 詳細な検索オプション
- 高度なフィルタリング
- レスポンシブ対応

## 9. 用語定義
- **ブックマーク:** ユーザーがX上で保存したツイート
- **RAG:** 検索結果を元にLLMが回答を生成する手法
- **LLM:** 大規模言語モデル（MVP版ではGemini 2.0 Flash） 