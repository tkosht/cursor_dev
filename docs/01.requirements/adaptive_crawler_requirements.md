# AdaptiveCrawler 要件定義書

## 1. はじめに

### 1.1 目的
本システムは、任意の企業のウェブサイトから企業情報を自動的に収集・構造化することを目的とする。

### 1.2 背景
- 企業情報の収集は多くの場合手動で行われており、時間と労力を要する
- 企業サイトの構造は統一されておらず、自動化が困難
- LLMの発展により、柔軟な情報抽出が可能になった

### 1.3 用語定義
- クローラー：ウェブサイトから情報を収集するプログラム
- LLM：大規模言語モデル
- サイトマップ：ウェブサイトの構造を示すXMLファイル
- セレクタ：HTMLから特定の要素を抽出するための指定子

## 2. 機能要件

### 2.1 基本機能

#### 2.1.1 サイト構造解析機能
- サイトマップの取得と解析
- ナビゲーション構造の分析
- 企業情報関連ページの特定

#### 2.1.2 情報抽出機能
- HTML解析
- 企業情報の特定と抽出
- データの構造化

#### 2.1.3 LLM連携機能
- ページの関連性評価
- 情報抽出ルールの生成
- 抽出データの検証

### 2.2 抽出対象情報
必須項目：
- 会社名
- 設立日
- 事業内容
- 本社所在地
- 代表者名

オプション項目：
- 資本金
- 従業員数
- 売上高
- 事業年度
- 上場市場

### 2.3 出力形式
```json
{
    "company_name": "企業名",
    "established_date": "YYYY-MM-DD",
    "business_description": "事業内容",
    "headquarters_address": "本社所在地",
    "representative": "代表者名",
    "capital": "資本金",
    "employees": "従業員数",
    "revenue": "売上高",
    "fiscal_year": "事業年度",
    "stock_market": "上場市場"
}
```

## 3. 非機能要件

### 3.1 性能要件
- 1サイトあたりの処理時間：5分以内
- 同時処理数：最大10サイト
- 成功率：80%以上
- レスポンスタイム：3秒以内（単一ページ処理）

### 3.2 信頼性要件
- システム稼働率：99%以上
- データ整合性：100%
- バックアップ：日次
- 障害復旧時間：1時間以内

### 3.3 セキュリティ要件
- アクセス制御の遵守
- robots.txtの尊重
- レート制限の遵守
- 個人情報の適切な取り扱い

### 3.4 保守性要件
- モジュール化された設計
- 詳細なログ記録
- 設定の外部化
- テストの自動化

## 4. 制約条件

### 4.1 技術的制約
- Python 3.10以上
- 非同期処理の採用
- メモリ使用量：2GB以下
- ディスク使用量：10GB以下

### 4.2 運用上の制約
- 営業時間外での実行
- クロール間隔：1サイトあたり1日1回まで
- エラー時の自動リトライ：最大3回
- 手動介入の最小化

## 5. 前提条件

### 5.1 システム環境
- Linux/Unix環境
- インターネット接続
- DNSサービスの利用可能性
- プロキシサーバーの利用（必要に応じて）

### 5.2 外部サービス
- LLMサービス
  - OpenAI API
  - 応答時間：5秒以内
  - 利用量制限の考慮

### 5.3 ユーザー環境
- Webブラウザ
- API クライアント
- コマンドラインインターフェース

## 6. 品質要件

### 6.1 品質特性
- 正確性：抽出データの95%以上が正確
- 完全性：必須項目の100%取得
- 可用性：24時間365日
- 保守性：1日以内の障害対応

### 6.2 品質基準
- コードカバレッジ：80%以上
- 静的解析エラー：0件
- 重大バグ：0件
- パフォーマンス基準の遵守

## 7. テスト要件

### 7.1 テストレベル
- 単体テスト
- 統合テスト
- システムテスト
- 受入テスト

### 7.2 テスト環境
- 開発環境
- テスト環境
- ステージング環境
- 本番環境

### 7.3 テスト項目
- 機能テスト
- 性能テスト
- セキュリティテスト
- 運用テスト

## 8. 移行要件

### 8.1 導入手順
1. 環境構築
2. 初期設定
3. テストデータ移行
4. 本番データ移行
5. 運用開始

### 8.2 教育・トレーニング
- システム管理者向けトレーニング
- 開発者向けドキュメント
- 運用マニュアルの整備

## 9. 運用保守要件

### 9.1 運用要件
- 24時間自動運転
- 定期的なバックアップ
- 監視体制の確立
- インシデント対応

### 9.2 保守要件
- 定期的なアップデート
- パッチ適用
- 設定変更
- パフォーマンスチューニング 