# A2A Protocol Investigation - Prototype

ã“ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ã€Googleå…¬å¼a2a-sdk v0.2.4ã‚’ä½¿ç”¨ã—ãŸA2Aï¼ˆAgent-to-Agentï¼‰ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã®å®Ÿæ©Ÿèª¿æŸ»ãƒ»æ¤œè¨¼ç”¨ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
./
â”œâ”€â”€ examples/                        # ğŸ†• å‹•ä½œç¢ºèªãƒ»ãƒ‡ãƒ¢ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ a2a_basic_check.py              # A2A SDKåŸºæœ¬å‹•ä½œç¢ºèª
â”‚   â””â”€â”€ simple_agent_demo.py            # SimpleTestAgentãƒ‡ãƒ¢
â”œâ”€â”€ tests/                           # ğŸ†• TDDæº–æ‹ ã®pytestãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ conftest.py                     # pytestå…±é€šè¨­å®šãƒ»ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£
â”‚   â”œâ”€â”€ unit/                           # å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆé«˜é€Ÿãƒ»ç‹¬ç«‹ï¼‰
â”‚   â”‚   â”œâ”€â”€ test_types/                 # a2a.types ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ test_agent_skill.py     # AgentSkill TDDãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â””â”€â”€ test_agents/                # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå˜ä½“ãƒ†ã‚¹ãƒˆ
â”‚   â”‚       â””â”€â”€ test_simple_agent.py    # SimpleTestAgent TDDãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ integration/                    # çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆä¸­é€Ÿãƒ»ä¾å­˜ã‚ã‚Šï¼‰
â”‚   â””â”€â”€ e2e/                           # E2Eãƒ†ã‚¹ãƒˆï¼ˆä½é€Ÿãƒ»å®Œå…¨ã‚·ãƒŠãƒªã‚ªï¼‰
â”œâ”€â”€ app/a2a_prototype/               # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ agents/                         # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…
â”‚   â”‚   â”œâ”€â”€ base_agent.py               # åŸºåº•ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¯ãƒ©ã‚¹
â”‚   â”‚   â””â”€â”€ simple_agent.py             # SimpleTestAgentå®Ÿè£…
â”‚   â””â”€â”€ utils/                          # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â””â”€â”€ config.py                   # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®šç®¡ç†
â””â”€â”€ docs/                            # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
    â”œâ”€â”€ a2a_implementation_guide.md     # æŠ€è¡“å®Ÿè£…ã‚¬ã‚¤ãƒ‰
    â””â”€â”€ development_rules/              # é–‹ç™ºãƒ«ãƒ¼ãƒ«ãƒ»ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
        â””â”€â”€ tdd_implementation_guide.md # TDDå®Ÿè·µã‚¬ã‚¤ãƒ‰
```

## ğŸ”„ ãƒ•ã‚¡ã‚¤ãƒ«åæ•´ç†ã«ã¤ã„ã¦

### æ•´ç†å‰ï¼ˆå•é¡ŒãŒã‚ã£ãŸæ§‹é€ ï¼‰

```
âŒ app/a2a_prototype/simple_test.py     # å‹•ä½œç¢ºèªã ãŒpytestã£ã½ã„åå‰
âŒ app/a2a_prototype/test_simple_agent.py # pytestãƒ†ã‚¹ãƒˆã ãŒé…ç½®å ´æ‰€ãŒä¸é©åˆ‡
```

**å•é¡Œç‚¹**:
- pytestæ¨™æº–ã®å‘½åè¦å‰‡ã«éæº–æ‹ 
- å‹•ä½œç¢ºèªã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨pytestãƒ†ã‚¹ãƒˆãŒæ··åœ¨
- TDDå®Ÿè·µã«ãªã£ã¦ã„ãªã„ç”˜ã„ãƒ†ã‚¹ãƒˆ
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒé…ç½®

### æ•´ç†å¾Œï¼ˆé©åˆ‡ãªæ§‹é€ ï¼‰

```
âœ… examples/a2a_basic_check.py          # æ˜ç¢ºã«å‹•ä½œç¢ºèªç”¨
âœ… examples/simple_agent_demo.py        # æ˜ç¢ºã«ãƒ‡ãƒ¢ç”¨
âœ… tests/unit/test_types/test_agent_skill.py     # TDDæº–æ‹ ã®pytestãƒ†ã‚¹ãƒˆ
âœ… tests/unit/test_agents/test_simple_agent.py   # TDDæº–æ‹ ã®pytestãƒ†ã‚¹ãƒˆ
```

**æ”¹å–„ç‚¹**:
- å½¹å‰²ãŒæ˜ç¢ºãªå‘½åãƒ»é…ç½®
- pytestæ¨™æº–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ æº–æ‹ 
- TDDï¼ˆTest Driven Developmentï¼‰å®Ÿè·µ
- å˜ä½“ãƒ»çµ±åˆãƒ»E2Eãƒ†ã‚¹ãƒˆã®éšå±¤åŒ–

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. åŸºæœ¬å‹•ä½œç¢ºèªï¼ˆæ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼‰

```bash
# A2A SDKåŸºæœ¬å‹•ä½œç¢ºèª
python examples/a2a_basic_check.py

# SimpleTestAgentãƒ‡ãƒ¢
python examples/simple_agent_demo.py
```

### 2. TDDæº–æ‹ ã®ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# å˜ä½“ãƒ†ã‚¹ãƒˆã®ã¿ï¼ˆé«˜é€Ÿï¼‰
poetry run pytest tests/unit/ -v

# å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
poetry run pytest tests/ -v

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ããƒ†ã‚¹ãƒˆå®Ÿè¡Œ
poetry run pytest tests/ --cov=src --cov-report=html

# ãƒ†ã‚¹ãƒˆã‚«ãƒ†ã‚´ãƒªåˆ¥å®Ÿè¡Œ
poetry run pytest tests/unit/ -m unit
poetry run pytest tests/integration/ -m integration
```

## ğŸ¯ TDDå®Ÿè·µã«ã¤ã„ã¦

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ **Test Driven Development (TDD)** ã‚’å³æ ¼ã«å®Ÿè·µã—ã¦ã„ã¾ã™ï¼š

1. **Red**: å¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’å…ˆã«æ›¸ã
2. **Green**: ãƒ†ã‚¹ãƒˆã‚’é€šã™ãŸã‚ã®æœ€å°é™ã®å®Ÿè£…
3. **Refactor**: ã‚³ãƒ¼ãƒ‰ã‚’æ”¹å–„ã—ã¤ã¤ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèª

è©³ç´°ã¯ [`docs/development_rules/tdd_implementation_guide.md`](../../docs/development_rules/tdd_implementation_guide.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“Š ãƒ†ã‚¹ãƒˆå“è³ªæŒ‡æ¨™

- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: æœ€ä½90%ã€ç›®æ¨™95% ã‚«ãƒãƒ¬ãƒƒã‚¸
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ä¸»è¦ãƒ‘ã‚¹100%
- **E2Eãƒ†ã‚¹ãƒˆ**: ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹100%
- **å®Ÿè¡Œæ™‚é–“**: å˜ä½“ãƒ†ã‚¹ãƒˆ<10ç§’ã€çµ±åˆãƒ†ã‚¹ãƒˆ<30ç§’ã€E2E<120ç§’

## ğŸ”§ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### æ–°æ©Ÿèƒ½è¿½åŠ æ™‚

```bash
# 1. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆï¼šå¤±æ•—ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
echo "def test_new_feature(): assert False" >> tests/unit/test_new_feature.py

# 2. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œï¼ˆRedï¼‰
poetry run pytest tests/unit/test_new_feature.py

# 3. æœ€å°å®Ÿè£…ï¼ˆGreenï¼‰
# å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãƒ†ã‚¹ãƒˆã‚’é€šã™

# 4. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ï¼ˆRefactorï¼‰
# ã‚³ãƒ¼ãƒ‰ã‚’æ”¹å–„ã—ã¤ã¤ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèª
```

### ãƒã‚°ä¿®æ­£æ™‚

```bash
# 1. å†ç¾ãƒ†ã‚¹ãƒˆã‚’å…ˆã«æ›¸ã
# 2. ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
# 3. ãƒã‚°ã‚’ä¿®æ­£
# 4. ãƒ†ã‚¹ãƒˆãŒé€šã‚‹ã“ã¨ã‚’ç¢ºèª
```

## ğŸ’¡ å­¦ç¿’äº‹é …

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å¾—ã‚‰ã‚ŒãŸé‡è¦ãªå­¦ç¿’äº‹é …ã¯ä»¥ä¸‹ã«ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ï¼š

- [`memory-bank/a2a_implementation_lessons_learned.md`](../../memory-bank/a2a_implementation_lessons_learned.md)
- A2Aå…¬å¼SDKã®æ­£ç¢ºãªAPIä»•æ§˜ç¢ºèªæ–¹æ³•
- Pydanticãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã®ä½“ç³»çš„è§£æ
- TDDå®Ÿè·µã®é‡è¦æ€§ã¨å…·ä½“çš„æ‰‹æ³•

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [A2Aå®Ÿè£…æŠ€è¡“ã‚¬ã‚¤ãƒ‰](../../docs/a2a_implementation_guide.md)
- [TDDå®Ÿè·µã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³](../../docs/development_rules/tdd_implementation_guide.md)
- [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå­¦ç¿’äº‹é …](../../memory-bank/a2a_implementation_lessons_learned.md)

---

**æ³¨æ„**: ã“ã®ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã¯èª¿æŸ»ãƒ»å­¦ç¿’ç›®çš„ã§ã™ã€‚æœ¬ç•ªç’°å¢ƒã§ã®ä½¿ç”¨å‰ã«è¿½åŠ ã®æ¤œè¨¼ãƒ»ãƒ†ã‚¹ãƒˆãŒå¿…è¦ã§ã™ã€‚ 